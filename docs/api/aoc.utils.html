<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>aoc.utils documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="highlight/atom-one-dark.css" /><script type="text/javascript" src="highlight/highlight.pack.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a> with the <a href="https://github.com/clojang/codox-theme">Clojang UI</a> theme</h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Aoc</span> <span class="project-version">0.3.0</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>aoc</span></div></div></li><li class="depth-2 branch"><a href="aoc.conf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>conf</span></div></a></li><li class="depth-2 branch"><a href="aoc.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="aoc.dev-hub.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>dev-hub</span></div></a></li><li class="depth-2 branch"><a href="aoc.handler.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>handler</span></div></a></li><li class="depth-2 branch"><a href="aoc.keys.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>keys</span></div></a></li><li class="depth-2 branch"><a href="aoc.mem.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mem</span></div></a></li><li class="depth-2 branch"><a href="aoc.mem-utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>mem-utils</span></div></a></li><li class="depth-2 branch"><a href="aoc.server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>server</span></div></a></li><li class="depth-2 branch current"><a href="aoc.utils.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>utils</span></div></a></li><li class="depth-2 branch"><a href="aoc.views.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>views</span></div></a></li><li class="depth-2"><a href="aoc.ws-server.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ws-server</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="aoc.utils.html#var-body-.3Emsg-data"><div class="inner"><span>body-&gt;msg-data</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-body-.3Emsg-data-map"><div class="inner"><span>body-&gt;msg-data-map</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-compare-value"><div class="inner"><span>compare-value</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-display-fullscale-vec"><div class="inner"><span>display-fullscale-vec</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-elem-id"><div class="inner"><span>elem-id</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-fill-kw"><div class="inner"><span>fill-kw</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-fill-vec"><div class="inner"><span>fill-vec</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-fullscale-of-branch"><div class="inner"><span>fullscale-of-branch</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-fullscale-vec"><div class="inner"><span>fullscale-vec</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-get-doc-path"><div class="inner"><span>get-doc-path</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-get-key"><div class="inner"><span>get-key</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-get-row"><div class="inner"><span>get-row</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-get-target-pressure"><div class="inner"><span>get-target-pressure</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-get-target-unit"><div class="inner"><span>get-target-unit</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-get-val"><div class="inner"><span>get-val</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-in-si-unit"><div class="inner"><span>in-si-unit</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-json-.3Emap"><div class="inner"><span>json-&gt;map</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-map-.3Ejson"><div class="inner"><span>map-&gt;json</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-map-value"><div class="inner"><span>map-value</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-max-pressure"><div class="inner"><span>max-pressure</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-max-pressure-by-fullscale"><div class="inner"><span>max-pressure-by-fullscale</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-measure.3F"><div class="inner"><span>measure?</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-measured.3F"><div class="inner"><span>measured?</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-next-target-pressure"><div class="inner"><span>next-target-pressure</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-norm-unit"><div class="inner"><span>norm-unit</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-open-or-close"><div class="inner"><span>open-or-close</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-operable-value"><div class="inner"><span>operable-value</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-parse-double"><div class="inner"><span>parse-double</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-parse-int"><div class="inner"><span>parse-int</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-range-factor"><div class="inner"><span>range-factor</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-range-ok.3F"><div class="inner"><span>range-ok?</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-replace-map"><div class="inner"><span>replace-map</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-suitable-task"><div class="inner"><span>suitable-task</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-target-pressure"><div class="inner"><span>target-pressure</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-todo-pressure"><div class="inner"><span>todo-pressure</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-todo-si-value-vec"><div class="inner"><span>todo-si-value-vec</span></div></a></li><li class="depth-1"><a href="aoc.utils.html#var-type-filter-fn"><div class="inner"><span>type-filter-fn</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">aoc.utils</h1><div class="doc"><div class="markdown"></div></div><div class="public anchor" id="var-body-.3Emsg-data"><h3>body-&gt;msg-data</h3><div class="usage"><code>(body-&gt;msg-data body)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L221">view source</a></div></div><div class="public anchor" id="var-body-.3Emsg-data-map"><h3>body-&gt;msg-data-map</h3><div class="usage"><code>(body-&gt;msg-data-map body)</code></div><div class="doc"><div class="markdown"><p>Avoid sending to much information back to frontend</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L215">view source</a></div></div><div class="public anchor" id="var-compare-value"><h3>compare-value</h3><div class="usage"><code>(compare-value m)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L58">view source</a></div></div><div class="public anchor" id="var-display-fullscale-vec"><h3>display-fullscale-vec</h3><div class="usage"><code>(display-fullscale-vec conf)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L167">view source</a></div></div><div class="public anchor" id="var-elem-id"><h3>elem-id</h3><div class="usage"><code>(elem-id conf a b)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L185">view source</a></div></div><div class="public anchor" id="var-fill-kw"><h3>fill-kw</h3><div class="usage"><code>(fill-kw conf item kw)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L191">view source</a></div></div><div class="public anchor" id="var-fill-vec"><h3>fill-vec</h3><div class="usage"><code>(fill-vec conf item vec)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L187">view source</a></div></div><div class="public anchor" id="var-fullscale-of-branch"><h3>fullscale-of-branch</h3><div class="usage"><code>(fullscale-of-branch v branch)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L113">view source</a></div></div><div class="public anchor" id="var-fullscale-vec"><h3>fullscale-vec</h3><div class="usage"><code>(fullscale-vec conf)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L111">view source</a></div></div><div class="public anchor" id="var-get-doc-path"><h3>get-doc-path</h3><div class="usage"><code>(get-doc-path req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L107">view source</a></div></div><div class="public anchor" id="var-get-key"><h3>get-key</h3><div class="usage"><code>(get-key req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L106">view source</a></div></div><div class="public anchor" id="var-get-row"><h3>get-row</h3><div class="usage"><code>(get-row req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L105">view source</a></div></div><div class="public anchor" id="var-get-target-pressure"><h3>get-target-pressure</h3><div class="usage"><code>(get-target-pressure req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L108">view source</a></div></div><div class="public anchor" id="var-get-target-unit"><h3>get-target-unit</h3><div class="usage"><code>(get-target-unit req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L109">view source</a></div></div><div class="public anchor" id="var-get-val"><h3>get-val</h3><div class="usage"><code>(get-val req)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L104">view source</a></div></div><div class="public anchor" id="var-in-si-unit"><h3>in-si-unit</h3><div class="usage"><code>(in-si-unit m)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L19">view source</a></div></div><div class="public anchor" id="var-json-.3Emap"><h3>json-&gt;map</h3><div class="usage"><code>(json-&gt;map j)</code></div><div class="doc"><div class="markdown"><p>Transforms a json object to a map.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L200">view source</a></div></div><div class="public anchor" id="var-map-.3Ejson"><h3>map-&gt;json</h3><div class="usage"><code>(map-&gt;json m)</code></div><div class="doc"><div class="markdown"><p>Transforms a hash-map to a json string</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L195">view source</a></div></div><div class="public anchor" id="var-map-value"><h3>map-value</h3><div class="usage"><code>(map-value m f)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L8">view source</a></div></div><div class="public anchor" id="var-max-pressure"><h3>max-pressure</h3><div class="usage"><code>(max-pressure conf v branch)</code></div><div class="doc"><div class="markdown"><p>Returns a map containing at least <code>:Value</code> and <code>:Unit</code> for the given <code>branch</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L135">view source</a></div></div><div class="public anchor" id="var-max-pressure-by-fullscale"><h3>max-pressure-by-fullscale</h3><div class="usage"><code>(max-pressure-by-fullscale conf fs)</code></div><div class="doc"><div class="markdown"><p>Returns a <code>map</code> with at least <code>:Type</code> and <code>Unit</code> belonging to the given fullscale (<code>string</code>).</p>
<p>Example:</p>
<pre><code class="clojure">(max-pressure-by-fullscale (c/config) "1mbar")
;; =&gt;
;; {:Unit Pa :Display 1mbar :Value 100}
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L121">view source</a></div></div><div class="public anchor" id="var-measure.3F"><h3>measure?</h3><div class="usage"><code>(measure? m-tar m-max)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L143">view source</a></div></div><div class="public anchor" id="var-measured.3F"><h3>measured?</h3><div class="usage"><code>(measured? [x n] v)</code><code>(measured? [x n] v uf lf)</code></div><div class="doc"><div class="markdown"><p>Checks if number <code>x</code> is in vector <code>v</code> <code>n</code> times. The value in <code>v</code> must fit within 1%. Example: ```clojure (def mv (mapv vector [200.0 300.0 500.0 700.0 1000.0] [1 1 1 1 3])) mv ;; =&gt; ;; <a href="null">200.0 1] [300.0 1] [500.0 1] [700.0 1] [1000.0 3</a></p>
<p>(def v [100.0 200.0 300.0])</p>
<p>(measured? (first mv) v) ;; 200 1x ;; =&gt; ;; true (def mv (mapv vector [200.0 300.0 500.0 700.0 1000.0] [2 1 1 1 3])) (measured? (first mv) v) ;; 200 2x ;; =&gt; ;; false (measured? (last mv) v) ;; 1000 3x ;; =&gt; ;; false</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L60">view source</a></div></div><div class="public anchor" id="var-next-target-pressure"><h3>next-target-pressure</h3><div class="usage"><code>(next-target-pressure d)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L93">view source</a></div></div><div class="public anchor" id="var-norm-unit"><h3>norm-unit</h3><div class="usage"><code>(norm-unit m)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L14">view source</a></div></div><div class="public anchor" id="var-open-or-close"><h3>open-or-close</h3><div class="usage"><code>(open-or-close m-tar m-bra)</code></div><div class="doc"><div class="markdown"><p>Returns the string <code>open</code> or <code>close</code> depending on the values given with <code>mt</code> (target pressure) and <code>mb</code> (fullscale of device at branch.</p>
<p>Example: </p>
<pre><code class="clojure">(open-or-close {:Value 0.099, :Unit "Pa"} {:Value 0.099, :Unit "Pa"})
;; =&gt;
;; close
(open-or-close {:Value 0.09, :Unit "Pa"} {:Value 0.099, :Unit "Pa"})
;; =&gt;
;; open
(open-or-close {:Value 1 :Unit "mbar"} {:Value 1 :Unit "Pa"})
;; =&gt;
;; close
(open-or-close {:Value 1 :Unit "Pa"} {:Value 1 :Unit "mbar"} )
;; =&gt;
;; open
</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L145">view source</a></div></div><div class="public anchor" id="var-operable-value"><h3>operable-value</h3><div class="usage"><code>(operable-value m)</code></div><div class="doc"><div class="markdown"><p>Ensures that all <code>:Value</code>s of <code>m</code> are numbers.</p>
<p>Example:</p>
<pre><code class="clojure">(operable-value {:Type "target_pressure", :Value ["100" 200.3 300 "500" 700 1000.1  "1000"], :Unit "Pa"})
;; =&gt;
;;
;; {:Type target_pressure,
;; :Value [100 200.3 300 500 700 1000.1 1000],
;; :Unit Pa}

</code></pre></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L35">view source</a></div></div><div class="public anchor" id="var-parse-double"><h3>parse-double</h3><div class="usage"><code>(parse-double s)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L30">view source</a></div></div><div class="public anchor" id="var-parse-int"><h3>parse-int</h3><div class="usage"><code>(parse-int s)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L29">view source</a></div></div><div class="public anchor" id="var-range-factor"><h3>range-factor</h3><div class="usage"><code>(range-factor conf s)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L168">view source</a></div></div><div class="public anchor" id="var-range-ok.3F"><h3>range-ok?</h3><div class="usage"><code>(range-ok? conf from to m-target m-fullscale)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L170">view source</a></div></div><div class="public anchor" id="var-replace-map"><h3>replace-map</h3><div class="usage"><code>(replace-map m task)</code></div><div class="doc"><div class="markdown"><p>Replaces the tokens given as keys in the map <code>m</code> in <code>task</code>.</p></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L205">view source</a></div></div><div class="public anchor" id="var-suitable-task"><h3>suitable-task</h3><div class="usage"><code>(suitable-task conf tasks m-tar m-full)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L180">view source</a></div></div><div class="public anchor" id="var-target-pressure"><h3>target-pressure</h3><div class="usage"><code>(target-pressure d)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L87">view source</a></div></div><div class="public anchor" id="var-todo-pressure"><h3>todo-pressure</h3><div class="usage"><code>(todo-pressure d)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L33">view source</a></div></div><div class="public anchor" id="var-todo-si-value-vec"><h3>todo-si-value-vec</h3><div class="usage"><code>(todo-si-value-vec d)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L51">view source</a></div></div><div class="public anchor" id="var-type-filter-fn"><h3>type-filter-fn</h3><div class="usage"><code>(type-filter-fn s)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/wactbprot/aoc/blob/master/src/aoc/utils.clj#L32">view source</a></div></div></div></body></html>